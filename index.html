<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>WaveForm</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://unpkg.com/wavesurfer.js"></script>
  </head>
  <body>
    <div class="hero">
      <div class="music">
        <img src="./media/caratula.jpg" />
        <div class="info">
          <h1>Try Me - The weeknd</h1>
          <p>Album - My Dear Melancholy</p>
          <div id="waveform"></div>
          <div class="controls">
            <img src="./media/play.png" alt="" id="playBtn" />
            <img src="./media/stop.png" alt="" id="stopBtn" />
            <img src="./media/volume.png" alt="" id="volumeBtn" />
          </div>
        </div>
      </div>
    </div>
    <script>
      var playBtn = document.getElementById("playBtn");
      var stopBtn = document.getElementById("stopBtn");
      var volumeBtn = document.getElementById("volumeBtn");

      var wavesurfer = WaveSurfer.create({
        container: "#waveform",
        waveColor: "#fff",
        progressColor: "#B14017",
        barWidth: 4,
        height: 90,
        responsive: true,
        hideScrollbar: true,
        barRadius: 4
      });
      wavesurfer.load("./media/tryme.mp3");

      playBtn.onclick = () => {
        wavesurfer.playPause();

        playBtn.src.includes("play.png")
          ? (playBtn.src = "./media/pause.png")
          : (playBtn.src = "./media/play.png");
      };
      stopBtn.onclick = () => {
        wavesurfer.stop();
        playBtn.src = "./media/play.png";
      };
      volumeBtn.onclick = () => {
        wavesurfer.toggleMute();
        volumeBtn.src.includes("volume.png")
          ? (volumeBtn.src = "./media/mute.png")
          : (volumeBtn.src = "./media/volume.png");
      };
      wavesurfer.on("finish", () => {
        playBtn.src = "./media/play.png";
        wavesurfer.stop();
      });
    </script>
  </body>
</html>
